<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Piers-Harris 2 – Test</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(to bottom right, #e7f3ff, #cfe6ff);
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 750px;
        margin: 40px auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        border: 1px solid #d0e4ff;
    }

    h1 {
        font-size: 28px;
        margin-bottom: 10px;
        color: #0a3d62;
        text-align: center;
    }

    .instructions {
        text-align: center;
        margin-bottom: 25px;
        font-size: 17px;
        color: #1b4f72;
    }

    .question {
        padding: 14px;
        border-bottom: 1px solid #eee;
        border-radius: 8px;
        transition: 0.25s;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .question.active {
        background: #e0f0ff;
        border: 1px solid #4da3ff;
        box-shadow: 0 0 6px rgba(0,123,255,0.4);
    }

    .answer-label {
        font-weight: bold;
        margin-left: 10px;
    }

    .explain-label {
        font-size: 14px;
        color: #1b4f72;
        opacity: 0.7;
    }

    button {
        margin-top: 25px;
        padding: 14px 26px;
        font-size: 20px;
        background: linear-gradient(to right, #4da3ff, #007bff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
        box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }

    button:hover {
        background: linear-gradient(to right, #6bb7ff, #3395ff);
    }

    .results {
        margin-top: 30px;
        padding-top: 15px;
        border-top: 2px solid #d6eaff;
    }

    .scale-result {
        font-size: 19px;
        padding: 6px 0;
    }
</style>
</head>

<body>

<div class="container">
    <h1>Piers-Harris 2 – Sebahodnotiaci dotazník</h1>
    <div class="instructions">
        Stláčaj <strong>1 (ÁNO)</strong> alebo <strong>0 (NIE)</strong>.<br>
        Aktuálna otázka je zvýraznená modrou.
    </div>

    <form id="testForm"></form>

    <button id="btnEvaluate">Vyhodnotiť výsledky</button>

    <div id="results" class="results"></div>
</div>

<script>
const scales = {
    BEH: [11, 14, 17, 22, 27, 32, 36, 40, 43, 49, 55],
    INT: [13, 16, 18, 26, 31, 33, 41, 45, 48, 54, 59],
    PHY: [5, 10, 20, 23, 28, 37, 39, 44, 50, 57],
    FRE: [6, 9, 15, 19, 24, 29, 35, 38, 47, 53, 56],
    POP: [2, 7, 12, 21, 25, 30, 34, 42, 46, 52, 58],
    HAP: [1, 3, 4, 8, 33, 51, 60]
};

let answers = {};
let activeQuestion = 1;
const form = document.getElementById("testForm");

// Generate 60 questions
for (let i = 1; i <= 60; i++) {
    const div = document.createElement("div");
    div.classList.add("question");
    div.id = `q-${i}`;
    div.innerHTML = `
        <div>
            <strong>${i}.</strong>
            <span class="answer-label" id="ans-${i}"></span>
        </div>
        <div class="explain-label">1 = Áno, 0 = Nie</div>
    `;
    form.appendChild(div);
}

function highlightActive() {
    for (let i = 1; i <= 60; i++) {
        document.getElementById(`q-${i}`).classList.remove("active");
    }

    const q = document.getElementById(`q-${activeQuestion}`);
    q.classList.add("active");

    // AUTOMATICKÉ SCROLLOVANIE – vždy ukáž aktuálnu otázku
    q.scrollIntoView({
        behavior: "smooth",
        block: "center"
    });
}

highlightActive();

// Handle keyboard input
document.addEventListener("keydown", function(e) {
    if (e.key === "1" || e.key === "0") {
        const value = Number(e.key);
        answers[activeQuestion] = value;

        // write answer next to question number
        const ansLabel = document.getElementById(`ans-${activeQuestion}`);
        ansLabel.textContent = value === 1 ? "ÁNO" : "NIE";
        ansLabel.style.color = value === 1 ? "#007bff" : "#ff4d4d";

        // go to next
        if (activeQuestion < 60) {
            activeQuestion++;
        }

        highlightActive();
    }
});

document.getElementById("btnEvaluate").addEventListener("click", () => {
    if (Object.keys(answers).length < 60) {
        alert("Ešte si nevyplnil všetky otázky.");
        return;
    }

    let output = "<h2>Výsledky</h2>";

    for (let scale in scales) {
        let score = 0;
        scales[scale].forEach(item => score += answers[item]);
        output += `<div class="scale-result"><strong>${scale}</strong>: ${score}</div>`;
    }

    document.getElementById("results").innerHTML = output;
});
</script>

</body>
</html>
